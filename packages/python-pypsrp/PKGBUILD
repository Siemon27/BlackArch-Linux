# This file is part of BlackArch Linux ( https://www.blackarch.org/ ).
# See COPYING for license details.

pkgname=python-pypsrp
_pkgname=pypsrp
pkgver=0.7.0
pkgrel=1
epoch=1
pkgdesc='PowerShell Remoting Protocol for Python.'
arch=('x86_64')
url='https://github.com/jborean93/pypsrp'
license=('MIT')
depends=('python' 'python-cryptography' 'python-pyspnego' 'python-requests'
         'python-requests-credssp' 'python-gssapi' 'krb5')
makedepends=('python-build' 'python-pip')
options=(!emptydirs)
source=("https://github.com/jborean93/$_pkgname/archive/refs/tags/v$pkgver.tar.gz")
sha512sums=('86d8e7b1f1081b1db2e209a6c0c11ccbe4667a7e20937513c25ab46a1194096c4ec125a1de5432a515d50ac8b893821e7b738064021632a6c9b93cb5c51f97fb')

build() {
  cd "$_pkgname-$pkgver"

  python -m build --wheel --outdir="$startdir/dist"
}

package() {
  cd "$_pkgname-$pkgver"

  pip install --verbose \
              --disable-pip-version-check \
              --no-warn-script-location \
              --ignore-installed \
              --no-compile \
              --no-deps \
              --root="$pkgdir" \
              --prefix=/usr \
              --no-index \
              --find-links="file://$startdir/dist" \
              "$pkgname"
}


